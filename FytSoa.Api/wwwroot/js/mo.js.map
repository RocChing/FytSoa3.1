{"version":3,"sources":["mo.js"],"names":["ArrayProto","Array","prototype","filterClassName","className","trim","replace","split","getComputedStyles","element","ownerDocument","defaultView","getComputedStyle","CLASSES","contains","classList","RegExp","test","add","forEach","name","remove","join","toggle","assign","target","Object","i","len","arguments","length","source","key","hasOwnProperty","call","SelectorRegs","id","tagName","qsa","selector","context","document","dom","getElementById","$1","getElementsByClassName","getElementsByTagName","querySelectorAll","slice","matchSelector","prop","Element","matchesSelector","matches","mozMatchesSelector","msMatchesSelector","oMatchesSelector","webkitMatchesSelector","each","object","callback","isArray","k","bind","eventType","sel","handler","e","nodes","matched","node","apply","addEventListener","unbind","removeEventListener","trigger","eventName","event","createEvent","initEvent","dispatchEvent","paramStringify","arr","value","data","push","toString","http","options","url","window","location","href","done","fail","dataString","method","type","toUpperCase","xhr","XMLHttpRequest","headers","accept","indexOf","undefined","open","setRequestHeader","onload","status","response","responseText","JSON","parse","send","utils","$","$$","addClass","removeClass","hasClass","toggleClass","getStyles","MoUtils"],"mappings":"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","file":"mo.js","sourcesContent":["/*\r\n * mo v0.0.1\r\n * author : smohan\r\n * The MIT License (MIT)\r\n * Copyright (c) 2016 https://smohan.net\r\n */\r\n(() => {\r\n\r\n    'use strict';\r\n\r\n    const ArrayProto = Array.prototype\r\n\r\n    /**\r\n     * 过滤样式，返回样式数组\r\n     * (classA classB ...) | (classA, classB ...) => [classA, classB]\r\n     * @param className\r\n     * @returns {Array}\r\n     */\r\n    const filterClassName = className => !className ? [] : className.trim().replace(/\\s+/, ',').split(',')\r\n\r\n    /**\r\n     * 获取元素计算后的样式\r\n     * @param  {HTMLElement} element\r\n     * @return {Object}\r\n     */\r\n    const getComputedStyles = element => element.ownerDocument.defaultView.getComputedStyle(element, null)\r\n\r\n\r\n    /**\r\n     * CLASSES 样式操作\r\n     * @type {Object}\r\n     */\r\n    const CLASSES = {\r\n        contains(element, className) {\r\n            if (element.classList) {\r\n                return element.classList.contains(className)\r\n            } else {\r\n                return new RegExp('(^| )' + className + '( |$)', 'gi').test(element.className)\r\n            }\r\n        },\r\n        add(element, className) {\r\n            filterClassName(className).forEach(name => {\r\n                name = name.trim();\r\n                if (name && !CLASSES.contains(element, name)) {\r\n                    if (element.classList) {\r\n                        element.classList.add(name)\r\n                    } else {\r\n                        element.className += ' ' + name\r\n                        element.className = element.className.trim()\r\n                    }\r\n                }\r\n            });\r\n        },\r\n        remove(element, className) {\r\n            filterClassName(className).forEach(name => {\r\n                name = name.trim();\r\n                if (name && CLASSES.contains(element, name)) {\r\n                    if (element.classList) {\r\n                        element.classList.remove(name)\r\n                    } else {\r\n                        element.className = element.className.replace(new RegExp('(^|\\\\b)' + name.split(' ').join('|') + '(\\\\b|$)', 'gi'), ' ');\r\n                        element.className = element.className.trim()\r\n                    }\r\n                }\r\n            });\r\n        },\r\n        toggle(element, className) {\r\n            filterClassName(className).forEach(name => {\r\n                if (element.classList) {\r\n                    return element.classList.toggle(name)\r\n                } else {\r\n                    return CLASSES.contains(element, name) ?\r\n                        CLASSES.remove(element, name) :\r\n                        CLASSES.add(element, name)\r\n                }\r\n            });\r\n        },\r\n    }\r\n\r\n    /**\r\n     * 拷贝源对象到目标对象\r\n     * Polyfill https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/assign\r\n     * @param target\r\n     * @returns {{}}\r\n     */\r\n    const assign = function (target = {}) {\r\n        target = Object(target)\r\n        for (let i = 1, len = arguments.length; i < len; i++) {\r\n            let source = arguments[i]\r\n            if (source != null) {\r\n                for (let key in source) {\r\n                    if (Object.prototype.hasOwnProperty.call(source, key)) {\r\n                        target[key] = source[key]\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return target\r\n    }\r\n\r\n    const SelectorRegs = {\r\n        id: /^#([\\w-]+)$/,\r\n        className: /^\\.([\\w-]+)$/,\r\n        tagName: /^[\\w-]+$/\r\n    }\r\n\r\n    /**\r\n     * 获取元素对象集合\r\n     * @param selector 选择器\r\n     * @param context 父级上下文\r\n     * @returns {*}\r\n     */\r\n    const qsa = (selector = '*', context = document) => {\r\n        if (typeof selector === \"string\") {\r\n            selector = selector.trim()\r\n            let dom = [];\r\n            if (SelectorRegs.id.test(selector)) {\r\n                dom = document.getElementById(RegExp.$1)\r\n                dom = dom ? [dom] : []\r\n            } else if (SelectorRegs.className.test(selector)) {\r\n                dom = context.getElementsByClassName(RegExp.$1)\r\n            } else if (SelectorRegs.tagName.test(selector)) {\r\n                dom = context.getElementsByTagName(selector)\r\n            } else {\r\n                dom = context.querySelectorAll(selector)\r\n            }\r\n            return ArrayProto.slice.call(dom)\r\n        }\r\n        return []\r\n    }\r\n\r\n\r\n    /**\r\n     * matchSelector兼容模式\r\n     * @param element\r\n     * @param selector\r\n     * @returns {*}\r\n     */\r\n    const matchSelector = (() => {\r\n        const prop = Element.prototype;\r\n        const matchesSelector =\r\n            prop.matches ||\r\n            prop.matchesSelector ||\r\n            prop.mozMatchesSelector ||\r\n            prop.msMatchesSelector ||\r\n            prop.oMatchesSelector ||\r\n            prop.webkitMatchesSelector\r\n        return (element, selector) => matchesSelector.call(element, selector)\r\n    })();\r\n\r\n    /**\r\n     * 对象遍历\r\n     * @param object\r\n     * @param callback\r\n     */\r\n    const each = (object, callback) => {\r\n        if (typeof object === \"object\" && typeof callback === \"function\") {\r\n            if (Array.isArray(object)) {\r\n                for (let i = 0, len = object.length; i < len; i++) {\r\n                    if (callback.call(object[i], i, object[i]) === false) {\r\n                        break\r\n                    }\r\n                }\r\n            } else if ('length' in object && typeof object.length === \"number\") { //这地方不太严谨，谨慎使用\r\n                for (let k in object) {\r\n                    if (callback.call(object[k], k, object[k]) === false) {\r\n                        break\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 事件绑定，支持简单事件代理\r\n     * @param element\r\n     * @param eventType\r\n     * @param selector\r\n     * @param callback\r\n     */\r\n    const bind = (element, eventType, selector, callback) => {\r\n        let sel, handler;\r\n        if (typeof selector === \"function\") {\r\n            handler = selector\r\n        } else if (typeof selector === \"string\" && typeof callback === \"function\") {\r\n            sel = selector\r\n        } else {\r\n            return\r\n        }\r\n        if (sel) { //事件代理\r\n            handler = function (e) {\r\n                //todo, 多选择器支持\r\n                const nodes = qsa(sel, element)\r\n                let matched = false\r\n                for (let i = 0, len = nodes.length; i < len; i++) {\r\n                    const node = nodes[i]\r\n                    if (node === e.target || node.contains(e.target)) {\r\n                        matched = node\r\n                        break\r\n                    }\r\n                }\r\n                if (matched) {\r\n                    callback.apply(matched, ArrayProto.slice.call(arguments))\r\n                }\r\n            }\r\n        }\r\n\r\n        element.addEventListener(eventType, handler, false)\r\n    }\r\n\r\n    /**\r\n     * 事件解绑\r\n     * @param element\r\n     * @param eventType\r\n     * @param callback\r\n     */\r\n    const unbind = (element, eventType, callback) => element.removeEventListener(eventType, callback, false)\r\n\r\n    /**\r\n     * 事件触发\r\n     * @param element\r\n     * @param eventName\r\n     */\r\n    const trigger = (element, eventName) => {\r\n        const event = document.createEvent('HTMLEvents')\r\n        event.initEvent(eventName, true, false)\r\n        element.dispatchEvent(event)\r\n    }\r\n\r\n\r\n    /**\r\n     * 将字面量对象转为URL字符串\r\n     * @param data\r\n     * @returns {string}\r\n     */\r\n    const paramStringify = data => {\r\n        const arr = [];\r\n        let key, value;\r\n        for (key in data) {\r\n            value = data[key]\r\n            if (value) {\r\n                arr.push(key + '=' + value.toString())\r\n            }\r\n        }\r\n        return arr.join('&')\r\n    }\r\n\r\n    /**\r\n     * http请求\r\n     * @param options\r\n     */\r\n    const http = (options = {}) => {\r\n        let url = options.url || window.location.href,\r\n            done = options.done || null,\r\n            fail = options.fail || null,\r\n            data = options.data,\r\n            dataString = paramStringify(data),\r\n            method = options.type && /^(get|post)$/i.test(options.type) ? options.type.toUpperCase() : 'GET'\r\n        const xhr = new XMLHttpRequest(),\r\n            headers = options.headers || {}\r\n        headers.accept = \"application/json, text/javascript\"\r\n        if (method === 'POST') {\r\n            headers['Content-Type'] = 'application/x-www-form-urlencoded; charset=UTF-8'\r\n        } else {\r\n            headers['Content-Type'] = 'application/json; charset=UTF-8'\r\n            url = url.indexOf('?') > -1 ? (url + dataString) : url\r\n            dataString = undefined\r\n        }\r\n        xhr.open(method, url, true)\r\n        for (let i in headers) {\r\n            xhr.setRequestHeader(i, headers[i])\r\n        }\r\n        xhr.onload = function () {\r\n            if (xhr.status >= 200 && xhr.status < 400) {\r\n                let response = xhr.responseText\r\n                try {\r\n                    response = JSON.parse(response)\r\n                } catch (e) { }\r\n                done && done.call(null, response, xhr)\r\n            } else {\r\n                fail && fail.call(xhr.status, 'error', xhr)\r\n            }\r\n        }\r\n        xhr.send(dataString)\r\n    }\r\n\r\n    const utils = {\r\n        $: (selector, context) => qsa(selector, context)[0],\r\n        $$: qsa,\r\n        matchSelector,\r\n        addClass: CLASSES.add,\r\n        removeClass: CLASSES.remove,\r\n        hasClass: CLASSES.contains,\r\n        toggleClass: CLASSES.toggle,\r\n        getStyles: getComputedStyles,\r\n        assign: Object.assign || assign,\r\n        each,\r\n        bind,\r\n        unbind,\r\n        trigger,\r\n        http\r\n    }\r\n\r\n    window.MoUtils = utils\r\n\r\n})();"]}